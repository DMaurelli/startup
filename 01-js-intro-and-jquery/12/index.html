<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Topic 1 - exercise 12</title>
    <meta charset="utf-8">
    <meta name="description" content="JavaScript">
    <meta name ="author" content="Diego Maurelli">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    
    <link href="normalize.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    
  </head>
  <body>
    <header class="header">
      <h1>Spotify search</h1>
    </header>
    <section class="section">
      <header>
	
      </header>
      <article class="section-article">
	
      </article>
      <footer>
	
      </footer>
    </section>
    <footer class="footer">
    </footer>
    
    <div class="input">
      <input type="text" id="artist"><br>
      <input type="submit" id="search" value="Search">
    </div>
    
    <script>
      $(document).ready(function(){
	$section = $('.section');
	$sectionArticle = $('.section-article');
	$artist = $('#artist');
	$search = $('#search');
	$artist.focus();
	$search.click(function(){
	  $search.hide();
	  $artist.hide();
	  $.ajax({
	  type: 'get',
	  url: 'https://api.spotify.com/v1/search',
	  dataType: 'json',
	  data:{
	    q: $artist.val(),
	    type: 'album'
	  },
	  success: function(data){
	    $sectionArticle.append("<div class='band'><h2>" + $artist.val() + "'s Albums</h2></div>");
	    $.each(data.albums.items, function(index, album){
	      $sectionArticle.append("<div class='name'><h3> Album: " + album.name + "</h3></div>"
				    +"<div class='type'> Type: " + album.album_type + "</div>"
				    +"<img src=\"" + album.images[1].url + "\"/><br>"
				    +"<a href=" + album.uri + ">Link to Spotify!</a>"
				    );
	    });
	  },
	  error: function(){

	  }
	});
	});
      });
    </script>
  </body>
</html>
